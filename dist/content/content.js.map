{"version":3,"file":"content.js","sources":["../../content/selection-detector.js","../../content/toolbox.js","../../content/unicode-formatters.js","../../content/content.js"],"sourcesContent":["// LinkedIn Formateur Toolbox - Selection Detector\n// D√©tection intelligente de la s√©lection de texte dans les champs LinkedIn\n\n/**\n * S√©lecteurs pour identifier les champs de saisie LinkedIn\n * Ces s√©lecteurs sont bas√©s sur l'analyse de la structure DOM de LinkedIn\n */\nconst LINKEDIN_INPUT_SELECTORS = [\n  // Champs de cr√©ation de posts\n  '[data-placeholder*=\"partager\"]',\n  '[data-placeholder*=\"What\\'s\"]',\n  '[data-placeholder*=\"share\"]',\n  '.ql-editor[contenteditable=\"true\"]', // Editeur principal\n  '[role=\"textbox\"]',\n  \n  // Champs de commentaires\n  '[data-placeholder*=\"comment\"]',\n  '[data-placeholder*=\"Add a comment\"]',\n  '[data-placeholder*=\"commentaire\"]',\n  '.comments-comment-box__form textarea',\n  '.comments-comment-texteditor',\n  \n  // Messages priv√©s\n  '[data-placeholder*=\"message\"]',\n  '[data-placeholder*=\"Write a message\"]',\n  '[data-placeholder*=\"R√©digez\"]',\n  '.msg-form__contenteditable',\n  '.msg-form__compose',\n  \n  // Champs de profil et autres\n  '[data-placeholder*=\"headline\"]',\n  '[data-placeholder*=\"summary\"]',\n  '[data-placeholder*=\"experience\"]',\n  'textarea[name*=\"summary\"]',\n  'textarea[name*=\"description\"]',\n  \n  // S√©lecteurs g√©n√©riques pour LinkedIn\n  'div[contenteditable=\"true\"]',\n  'textarea',\n  'input[type=\"text\"]',\n  '.editor-content',\n  '[data-editor=\"true\"]'\n];\n\n/**\n * Configuration de la d√©tection\n */\nconst DETECTION_CONFIG = {\n  // D√©lai minimum avant de consid√©rer une nouvelle s√©lection\n  debounceDelay: 100,\n  \n  // Longueur minimale de texte s√©lectionn√©\n  minSelectionLength: 1,\n  \n  // Classes LinkedIn √† √©viter (pour ne pas interf√©rer)\n  excludeClasses: [\n    'lt-extension',\n    'ltf-toolbox',\n    'linkedin-ads',\n    'ad-banner'\n  ],\n  \n  // Attributs indiquant un champ en lecture seule\n  readOnlyAttributes: [\n    'readonly',\n    'disabled',\n    'aria-readonly'\n  ]\n};\n\n/**\n * Classe principale pour la d√©tection de s√©lection\n */\nclass SelectionDetector {\n  constructor() {\n    this.isInitialized = false;\n    this.currentSelection = null;\n    this.currentField = null;\n    this.selectionHandlers = new Set();\n    this.debounceTimer = null;\n    \n    // Bind methods\n    this.handleSelectionChange = this.handleSelectionChange.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n    this.handleKeyUp = this.handleKeyUp.bind(this);\n  }\n\n  /**\n   * Initialise la d√©tection de s√©lection\n   */\n  init() {\n    if (this.isInitialized) {\n      return;\n    }\n\n    \n    // √âv√©nements globaux\n    document.addEventListener('selectionchange', this.handleSelectionChange, true);\n    document.addEventListener('mouseup', this.handleMouseUp, true);\n    document.addEventListener('keyup', this.handleKeyUp, true);\n    \n    // Observer pour les nouveaux champs (LinkedIn SPA)\n    this.observeNewFields();\n    \n    this.isInitialized = true;\n  }\n\n  /**\n   * Observer pour d√©tecter les nouveaux champs LinkedIn (SPA)\n   */\n  observeNewFields() {\n    const observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        mutation.addedNodes.forEach((node) => {\n          if (node.nodeType === Node.ELEMENT_NODE) {\n            this.checkForLinkedInFields(node);\n          }\n        });\n      });\n    });\n\n    observer.observe(document.body, {\n      childList: true,\n      subtree: true\n    });\n\n    // Check initial fields\n    this.checkForLinkedInFields(document.body);\n  }\n\n  /**\n   * V√©rifie s'il y a de nouveaux champs LinkedIn dans un √©l√©ment\n   */\n  checkForLinkedInFields(element) {\n    LINKEDIN_INPUT_SELECTORS.forEach(selector => {\n      try {\n        const fields = element.querySelectorAll(selector);\n        fields.forEach(field => {\n          if (!field.hasAttribute('data-ltf-monitored')) {\n            this.monitorField(field);\n          }\n        });\n      } catch (error) {\n        // S√©lecteur invalide, on l'ignore\n      }\n    });\n  }\n\n  /**\n   * Ajoute la surveillance √† un champ sp√©cifique\n   */\n  monitorField(field) {\n    if (!this.isValidLinkedInField(field)) {\n      return;\n    }\n\n    field.setAttribute('data-ltf-monitored', 'true');\n  }\n\n  /**\n   * V√©rifie si c'est un champ LinkedIn valide\n   */\n  isValidLinkedInField(field) {\n    // V√©rifier si c'est en lecture seule\n    for (const attr of DETECTION_CONFIG.readOnlyAttributes) {\n      if (field.hasAttribute(attr) && field.getAttribute(attr) !== 'false') {\n        return false;\n      }\n    }\n\n    // V√©rifier les classes √† exclure\n    for (const className of DETECTION_CONFIG.excludeClasses) {\n      if (field.classList.contains(className)) {\n        return false;\n      }\n    }\n\n    // V√©rifier si c'est dans le contexte LinkedIn\n    return this.isInLinkedInContext(field);\n  }\n\n  /**\n   * V√©rifie si l'√©l√©ment est dans le contexte LinkedIn\n   */\n  isInLinkedInContext(element) {\n    // V√©rifier l'URL\n    if (!window.location.hostname.includes('linkedin.com')) {\n      return false;\n    }\n\n    // V√©rifier les classes parentes LinkedIn\n    let parent = element.parentElement;\n    let depth = 0;\n    const maxDepth = 10;\n\n    while (parent && depth < maxDepth) {\n      const classList = parent.classList;\n      \n      // Classes LinkedIn communes\n      if (classList.contains('feed-shared-update-v2') ||\n          classList.contains('comments-comment-box') ||\n          classList.contains('msg-form') ||\n          classList.contains('artdeco-card') ||\n          classList.contains('feed-shared-text')) {\n        return true;\n      }\n\n      parent = parent.parentElement;\n      depth++;\n    }\n\n    return true; // Par d√©faut, accepter si on est sur LinkedIn\n  }\n\n  /**\n   * Gestionnaire principal des changements de s√©lection\n   */\n  handleSelectionChange(event) {\n    this.debounceSelectionChange();\n  }\n\n  /**\n   * Gestionnaire mouseup pour d√©tecter les s√©lections √† la souris\n   */\n  handleMouseUp(event) {\n    // D√©lai court pour laisser la s√©lection se stabiliser\n    setTimeout(() => {\n      this.processSelection();\n    }, 10);\n  }\n\n  /**\n   * Gestionnaire keyup pour d√©tecter les s√©lections au clavier\n   */\n  handleKeyUp(event) {\n    // Seulement pour les touches de navigation et s√©lection\n    const selectionKeys = ['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Home', 'End', 'Shift'];\n    \n    if (selectionKeys.includes(event.key) || event.shiftKey) {\n      this.debounceSelectionChange();\n    }\n  }\n\n  /**\n   * Debounce les changements de s√©lection pour √©viter le spam\n   */\n  debounceSelectionChange() {\n    if (this.debounceTimer) {\n      clearTimeout(this.debounceTimer);\n    }\n\n    this.debounceTimer = setTimeout(() => {\n      this.processSelection();\n    }, DETECTION_CONFIG.debounceDelay);\n  }\n\n  /**\n   * Traite la s√©lection actuelle\n   */\n  processSelection() {\n    const selection = window.getSelection();\n    \n    if (!selection || selection.rangeCount === 0) {\n      this.clearSelection();\n      return;\n    }\n\n    const range = selection.getRangeAt(0);\n    const selectedText = selection.toString().trim();\n\n    // V√©rifier la longueur minimale\n    if (selectedText.length < DETECTION_CONFIG.minSelectionLength) {\n      this.clearSelection();\n      return;\n    }\n\n    // V√©rifier si la s√©lection est dans un champ LinkedIn\n    const commonAncestor = range.commonAncestorContainer;\n    const field = this.findLinkedInField(commonAncestor);\n\n    if (!field) {\n      this.clearSelection();\n      return;\n    }\n\n    // Nouvelle s√©lection valide d√©tect√©e\n    this.setSelection({\n      text: selectedText,\n      range: range,\n      field: field,\n      fieldInfo: this.getFieldInfo(field)\n    });\n  }\n\n  /**\n   * Trouve le champ LinkedIn parent de l'√©l√©ment\n   */\n  findLinkedInField(element) {\n    let current = element;\n    let depth = 0;\n    const maxDepth = 15;\n\n    while (current && depth < maxDepth) {\n      if (current.nodeType === Node.ELEMENT_NODE) {\n        // V√©rifier si c'est un champ surveill√©\n        if (current.hasAttribute('data-ltf-monitored')) {\n          return current;\n        }\n\n        // V√©rifier avec les s√©lecteurs\n        for (const selector of LINKEDIN_INPUT_SELECTORS) {\n          try {\n            if (current.matches(selector) && this.isValidLinkedInField(current)) {\n              this.monitorField(current); // L'ajouter √† la surveillance\n              return current;\n            }\n          } catch (error) {\n            // S√©lecteur invalide\n          }\n        }\n      }\n\n      current = current.parentElement;\n      depth++;\n    }\n\n    return null;\n  }\n\n  /**\n   * Obtient les informations sur un champ\n   */\n  getFieldInfo(field) {\n    return {\n      tagName: field.tagName.toLowerCase(),\n      type: field.type || 'unknown',\n      placeholder: field.getAttribute('placeholder') || field.getAttribute('data-placeholder') || '',\n      role: field.getAttribute('role') || '',\n      classes: Array.from(field.classList),\n      id: field.id || '',\n      isContentEditable: field.contentEditable === 'true'\n    };\n  }\n\n  /**\n   * D√©finit une nouvelle s√©lection\n   */\n  setSelection(selectionData) {\n    this.currentSelection = selectionData;\n    this.currentField = selectionData.field;\n\n\n    // Notifier les handlers\n    this.notifySelectionHandlers('selection', selectionData);\n  }\n\n  /**\n   * Efface la s√©lection actuelle\n   */\n  clearSelection() {\n    if (this.currentSelection) {\n      \n      // Notifier les handlers\n      this.notifySelectionHandlers('deselection', {\n        previousSelection: this.currentSelection\n      });\n\n      this.currentSelection = null;\n      this.currentField = null;\n    }\n  }\n\n  /**\n   * Ajoute un handler pour les √©v√©nements de s√©lection\n   */\n  addSelectionHandler(handler) {\n    this.selectionHandlers.add(handler);\n  }\n\n  /**\n   * Supprime un handler\n   */\n  removeSelectionHandler(handler) {\n    this.selectionHandlers.delete(handler);\n  }\n\n  /**\n   * Notifie tous les handlers\n   */\n  notifySelectionHandlers(type, data) {\n    this.selectionHandlers.forEach(handler => {\n      try {\n        handler(type, data);\n      } catch (error) {\n      }\n    });\n  }\n\n  /**\n   * Obtient la s√©lection actuelle\n   */\n  getCurrentSelection() {\n    return this.currentSelection;\n  }\n\n  /**\n   * Obtient le champ actuel\n   */\n  getCurrentField() {\n    return this.currentField;\n  }\n\n  /**\n   * Nettoie et d√©truit le d√©tecteur\n   */\n  destroy() {\n    if (!this.isInitialized) return;\n\n    document.removeEventListener('selectionchange', this.handleSelectionChange, true);\n    document.removeEventListener('mouseup', this.handleMouseUp, true);\n    document.removeEventListener('keyup', this.handleKeyUp, true);\n\n    if (this.debounceTimer) {\n      clearTimeout(this.debounceTimer);\n    }\n\n    this.selectionHandlers.clear();\n    this.currentSelection = null;\n    this.currentField = null;\n    this.isInitialized = false;\n\n  }\n}\n\n// Exporter la classe et cr√©er une instance globale\nexport { SelectionDetector, LINKEDIN_INPUT_SELECTORS, DETECTION_CONFIG };\n\n// Instance globale pour l'extension\nexport const selectionDetector = new SelectionDetector();","// LinkedIn Formateur Toolbox - Toolbox UI Component\n// Interface utilisateur de la toolbox flottante\n\n/**\n * Configuration de la toolbox\n */\nconst TOOLBOX_CONFIG = {\n  // Dimensions\n  width: 160,\n  height: 40,\n  buttonSize: 32,\n  buttonSpacing: 4,\n  \n  // Positionnement\n  offsetTop: 10,\n  offsetBottom: 10,\n  offsetSides: 10,\n  \n  // Animations\n  animationDuration: 200,\n  fadeOutDuration: 150,\n  \n  // Z-index\n  zIndex: 10000,\n  \n  // Classes CSS\n  cssPrefix: 'ltf-',\n  \n  // Boutons de formatage\n  buttons: [\n    {\n      id: 'bold',\n      label: 'B',\n      tooltip: 'Gras',\n      className: 'ltf-font-bold'\n    },\n    {\n      id: 'italic',\n      label: 'I',\n      tooltip: 'Italique', \n      className: 'ltf-italic'\n    },\n    {\n      id: 'underline',\n      label: 'U',\n      tooltip: 'Soulign√©',\n      className: 'ltf-underline'\n    },\n    {\n      id: 'strikethrough',\n      label: 'S',\n      tooltip: 'Barr√©',\n      className: 'ltf-line-through'\n    }\n  ]\n};\n\n/**\n * Classe principale pour la toolbox flottante\n */\nclass ToolboxUI {\n  constructor() {\n    this.isVisible = false;\n    this.toolboxElement = null;\n    this.currentSelection = null;\n    this.formatHandlers = new Map();\n    this.isAnimating = false;\n    \n    // Bind methods\n    this.handleDocumentClick = this.handleDocumentClick.bind(this);\n    this.handleButtonClick = this.handleButtonClick.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    \n    // Initialisation\n    this.init();\n  }\n\n  /**\n   * Initialise la toolbox\n   */\n  init() {\n    \n    // Cr√©er l'√©l√©ment toolbox\n    this.createToolboxElement();\n    \n    // Ajouter les √©v√©nements globaux\n    document.addEventListener('click', this.handleDocumentClick, true);\n    document.addEventListener('keydown', this.handleKeyDown, true);\n    \n  }\n\n  /**\n   * Cr√©e l'√©l√©ment DOM de la toolbox\n   */\n  createToolboxElement() {\n    // Supprimer l'ancienne toolbox si elle existe\n    if (this.toolboxElement) {\n      this.toolboxElement.remove();\n    }\n\n    // Cr√©er le conteneur principal\n    this.toolboxElement = document.createElement('div');\n    this.toolboxElement.id = 'ltf-toolbox';\n    this.toolboxElement.className = `\n      ${TOOLBOX_CONFIG.cssPrefix}fixed\n      ${TOOLBOX_CONFIG.cssPrefix}bg-toolbox-bg\n      ${TOOLBOX_CONFIG.cssPrefix}border\n      ${TOOLBOX_CONFIG.cssPrefix}border-toolbox-border\n      ${TOOLBOX_CONFIG.cssPrefix}rounded-toolbox\n      ${TOOLBOX_CONFIG.cssPrefix}shadow-toolbox\n      ${TOOLBOX_CONFIG.cssPrefix}flex\n      ${TOOLBOX_CONFIG.cssPrefix}items-center\n      ${TOOLBOX_CONFIG.cssPrefix}gap-1\n      ${TOOLBOX_CONFIG.cssPrefix}p-1\n      ${TOOLBOX_CONFIG.cssPrefix}opacity-0\n      ${TOOLBOX_CONFIG.cssPrefix}pointer-events-none\n      ${TOOLBOX_CONFIG.cssPrefix}transition-all\n      ${TOOLBOX_CONFIG.cssPrefix}duration-200\n    `.trim().replace(/\\s+/g, ' ');\n\n    // Styles inline pour garantir le bon affichage\n    this.toolboxElement.style.cssText = `\n      position: fixed;\n      z-index: ${TOOLBOX_CONFIG.zIndex};\n      width: ${TOOLBOX_CONFIG.width}px;\n      height: ${TOOLBOX_CONFIG.height}px;\n      background: #ffffff;\n      border: 1px solid #e1e5e9;\n      border-radius: 6px;\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px;\n      opacity: 0;\n      pointer-events: none;\n      transition: all 0.2s ease-out;\n      transform: translateY(8px);\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    `;\n\n    // Cr√©er les boutons\n    this.createButtons();\n\n    // Ajouter au DOM (mais invisible)\n    document.body.appendChild(this.toolboxElement);\n  }\n\n  /**\n   * Cr√©e les boutons de formatage\n   */\n  createButtons() {\n    TOOLBOX_CONFIG.buttons.forEach(buttonConfig => {\n      const button = document.createElement('button');\n      button.id = `ltf-btn-${buttonConfig.id}`;\n      button.className = `ltf-toolbox-btn ltf-btn-${buttonConfig.id}`;\n      button.setAttribute('data-format', buttonConfig.id);\n      button.setAttribute('title', buttonConfig.tooltip);\n      button.textContent = buttonConfig.label;\n\n      // Styles inline pour les boutons\n      button.style.cssText = `\n        width: ${TOOLBOX_CONFIG.buttonSize}px;\n        height: ${TOOLBOX_CONFIG.buttonSize}px;\n        border: none;\n        border-radius: 4px;\n        background: transparent;\n        color: #666666;\n        font-size: 14px;\n        font-weight: 600;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.1s ease;\n        user-select: none;\n        -webkit-user-select: none;\n      `;\n\n      // Ajouter les styles sp√©cifiques au bouton\n      if (buttonConfig.className) {\n        if (buttonConfig.id === 'bold') {\n          button.style.fontWeight = 'bold';\n        } else if (buttonConfig.id === 'italic') {\n          button.style.fontStyle = 'italic';\n        } else if (buttonConfig.id === 'underline') {\n          button.style.textDecoration = 'underline';\n        } else if (buttonConfig.id === 'strikethrough') {\n          button.style.textDecoration = 'line-through';\n        }\n      }\n\n      // √âv√©nements hover\n      button.addEventListener('mouseenter', () => {\n        button.style.backgroundColor = '#f3f2ef';\n        button.style.color = '#0a66c2';\n      });\n\n      button.addEventListener('mouseleave', () => {\n        button.style.backgroundColor = 'transparent';\n        button.style.color = '#666666';\n      });\n\n      // √âv√©nement clic\n      button.addEventListener('click', this.handleButtonClick);\n\n      this.toolboxElement.appendChild(button);\n    });\n  }\n\n  /**\n   * Affiche la toolbox √† la position du texte s√©lectionn√©\n   */\n  show(selectionData) {\n    if (this.isAnimating) return;\n\n    this.currentSelection = selectionData;\n    this.isVisible = true;\n\n\n    // Calculer la position\n    const position = this.calculatePosition(selectionData);\n    \n    // Positionner la toolbox\n    this.toolboxElement.style.left = position.x + 'px';\n    this.toolboxElement.style.top = position.y + 'px';\n\n    // Afficher avec animation\n    this.animateShow();\n  }\n\n  /**\n   * Calcule la position optimale pour la toolbox\n   */\n  calculatePosition(selectionData) {\n    const range = selectionData.range;\n    const rect = range.getBoundingClientRect();\n    \n    // Position par d√©faut : au-dessus du texte s√©lectionn√©\n    let x = rect.left + (rect.width / 2) - (TOOLBOX_CONFIG.width / 2);\n    let y = rect.top - TOOLBOX_CONFIG.height - TOOLBOX_CONFIG.offsetTop;\n\n    // Ajustements pour les d√©bordements\n    const viewport = {\n      width: window.innerWidth,\n      height: window.innerHeight\n    };\n\n    // Ajustement horizontal\n    if (x < TOOLBOX_CONFIG.offsetSides) {\n      x = TOOLBOX_CONFIG.offsetSides;\n    } else if (x + TOOLBOX_CONFIG.width > viewport.width - TOOLBOX_CONFIG.offsetSides) {\n      x = viewport.width - TOOLBOX_CONFIG.width - TOOLBOX_CONFIG.offsetSides;\n    }\n\n    // Ajustement vertical - si pas assez de place en haut, mettre en bas\n    if (y < TOOLBOX_CONFIG.offsetTop) {\n      y = rect.bottom + TOOLBOX_CONFIG.offsetBottom;\n    }\n\n    // V√©rifier que la toolbox reste dans le viewport\n    if (y + TOOLBOX_CONFIG.height > viewport.height - TOOLBOX_CONFIG.offsetBottom) {\n      y = viewport.height - TOOLBOX_CONFIG.height - TOOLBOX_CONFIG.offsetBottom;\n    }\n\n    return { x, y };\n  }\n\n  /**\n   * Animation d'apparition\n   */\n  animateShow() {\n    this.isAnimating = true;\n    \n    // Activer les interactions\n    this.toolboxElement.style.pointerEvents = 'auto';\n    \n    // Animation slide-up + fade-in\n    this.toolboxElement.style.opacity = '1';\n    this.toolboxElement.style.transform = 'translateY(0)';\n\n    // Fin de l'animation\n    setTimeout(() => {\n      this.isAnimating = false;\n    }, TOOLBOX_CONFIG.animationDuration);\n  }\n\n  /**\n   * Masque la toolbox\n   */\n  hide() {\n    if (!this.isVisible || this.isAnimating) return;\n\n    this.isVisible = false;\n    this.isAnimating = true;\n\n\n    // Animation fade-out\n    this.toolboxElement.style.opacity = '0';\n    this.toolboxElement.style.transform = 'translateY(8px)';\n    this.toolboxElement.style.pointerEvents = 'none';\n\n    // Nettoyage apr√®s animation\n    setTimeout(() => {\n      this.currentSelection = null;\n      this.isAnimating = false;\n    }, TOOLBOX_CONFIG.fadeOutDuration);\n  }\n\n  /**\n   * G√®re les clics sur les boutons\n   */\n  handleButtonClick(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const button = event.currentTarget;\n    const formatType = button.getAttribute('data-format');\n\n\n    // Ajouter effet visuel de clic\n    button.style.backgroundColor = '#e1e5e9';\n    setTimeout(() => {\n      button.style.backgroundColor = 'transparent';\n    }, 100);\n\n    // D√©clencher le formatage\n    this.triggerFormatting(formatType);\n\n    // Masquer la toolbox\n    this.hide();\n  }\n\n  /**\n   * D√©clenche le formatage du texte\n   */\n  triggerFormatting(formatType) {\n    if (!this.currentSelection) return;\n\n\n    // Notifier les handlers enregistr√©s\n    if (this.formatHandlers.has(formatType)) {\n      const handler = this.formatHandlers.get(formatType);\n      try {\n        handler(this.currentSelection, formatType);\n      } catch (error) {\n      }\n    }\n  }\n\n  /**\n   * Enregistre un handler pour un type de formatage\n   */\n  addFormatHandler(formatType, handler) {\n    this.formatHandlers.set(formatType, handler);\n  }\n\n  /**\n   * Supprime un handler de formatage\n   */\n  removeFormatHandler(formatType) {\n    this.formatHandlers.delete(formatType);\n  }\n\n  /**\n   * G√®re les clics sur le document (pour fermer la toolbox)\n   */\n  handleDocumentClick(event) {\n    if (!this.isVisible) return;\n\n    // Si le clic est sur la toolbox, ne pas fermer\n    if (this.toolboxElement.contains(event.target)) {\n      return;\n    }\n\n    // Fermer la toolbox\n    this.hide();\n  }\n\n  /**\n   * G√®re les raccourcis clavier\n   */\n  handleKeyDown(event) {\n    if (!this.isVisible) return;\n\n    // √âchapper pour fermer\n    if (event.key === 'Escape') {\n      event.preventDefault();\n      this.hide();\n    }\n  }\n\n  /**\n   * V√©rifie si la toolbox est visible\n   */\n  isShowing() {\n    return this.isVisible;\n  }\n\n  /**\n   * Obtient la s√©lection actuelle\n   */\n  getCurrentSelection() {\n    return this.currentSelection;\n  }\n\n  /**\n   * Nettoie et d√©truit la toolbox\n   */\n  destroy() {\n    if (!this.toolboxElement) return;\n\n\n    // Supprimer les √©v√©nements\n    document.removeEventListener('click', this.handleDocumentClick, true);\n    document.removeEventListener('keydown', this.handleKeyDown, true);\n\n    // Supprimer l'√©l√©ment DOM\n    if (this.toolboxElement.parentNode) {\n      this.toolboxElement.parentNode.removeChild(this.toolboxElement);\n    }\n\n    // Nettoyer les r√©f√©rences\n    this.toolboxElement = null;\n    this.currentSelection = null;\n    this.formatHandlers.clear();\n    this.isVisible = false;\n    this.isAnimating = false;\n  }\n}\n\n// Exporter la classe et cr√©er une instance globale\nexport { ToolboxUI, TOOLBOX_CONFIG };\n\n// Instance globale pour l'extension\nexport const toolboxUI = new ToolboxUI();","// LinkedIn Formateur Toolbox - Unicode Formatters\n// Fonctions de formatage avec caract√®res Unicode sp√©ciaux pour LinkedIn\n\n/**\n * Convertit le texte en caract√®res Unicode Mathematical Bold\n * Utilis√© pour le formatage **gras** sur LinkedIn\n * @param {string} text - Le texte √† formater\n * @returns {string} - Le texte format√© en gras Unicode\n */\nexport function toBold(text) {\n  if (!text || typeof text !== 'string') {\n    return text;\n  }\n\n  // Tables de mapping Unicode Mathematical Bold\n  const boldMappings = {\n    // Lettres majuscules A-Z ‚Üí ùêÄ-ùêô (U+1D400-U+1D419)\n    'A': 'ùêÄ', 'B': 'ùêÅ', 'C': 'ùêÇ', 'D': 'ùêÉ', 'E': 'ùêÑ', 'F': 'ùêÖ', 'G': 'ùêÜ', 'H': 'ùêá',\n    'I': 'ùêà', 'J': 'ùêâ', 'K': 'ùêä', 'L': 'ùêã', 'M': 'ùêå', 'N': 'ùêç', 'O': 'ùêé', 'P': 'ùêè',\n    'Q': 'ùêê', 'R': 'ùêë', 'S': 'ùêí', 'T': 'ùêì', 'U': 'ùêî', 'V': 'ùêï', 'W': 'ùêñ', 'X': 'ùêó',\n    'Y': 'ùêò', 'Z': 'ùêô',\n    \n    // Lettres minuscules a-z ‚Üí ùêö-ùê≥ (U+1D41A-U+1D433)\n    'a': 'ùêö', 'b': 'ùêõ', 'c': 'ùêú', 'd': 'ùêù', 'e': 'ùêû', 'f': 'ùêü', 'g': 'ùê†', 'h': 'ùê°',\n    'i': 'ùê¢', 'j': 'ùê£', 'k': 'ùê§', 'l': 'ùê•', 'm': 'ùê¶', 'n': 'ùêß', 'o': 'ùê®', 'p': 'ùê©',\n    'q': 'ùê™', 'r': 'ùê´', 's': 'ùê¨', 't': 'ùê≠', 'u': 'ùêÆ', 'v': 'ùêØ', 'w': 'ùê∞', 'x': 'ùê±',\n    'y': 'ùê≤', 'z': 'ùê≥',\n    \n    // Chiffres 0-9 ‚Üí ùüé-ùüó (U+1D7CE-U+1D7D7)\n    '0': 'ùüé', '1': 'ùüè', '2': 'ùüê', '3': 'ùüë', '4': 'ùüí',\n    '5': 'ùüì', '6': 'ùüî', '7': 'ùüï', '8': 'ùüñ', '9': 'ùüó'\n  };\n\n  try {\n    // Transformer chaque caract√®re\n    let result = '';\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      const boldChar = boldMappings[char];\n      result += boldChar || char; // Utiliser le caract√®re gras ou le caract√®re original\n    }\n\n    return result;\n  } catch (error) {\n    return text; // Fallback vers le texte original\n  }\n}\n\n/**\n * Convertit le texte en caract√®res Unicode Mathematical Italic\n * Utilis√© pour le formatage *italique* sur LinkedIn  \n * @param {string} text - Le texte √† formater\n * @returns {string} - Le texte format√© en italique Unicode\n */\nexport function toItalic(text) {\n  if (!text || typeof text !== 'string') {\n    return text;\n  }\n\n  // Tables de mapping Unicode Mathematical Sans-Serif Italic (plus stable sur LinkedIn)\n  const italicMappings = {\n    // Lettres majuscules A-Z ‚Üí ùòà-ùò° (U+1D608-U+1D621)\n    'A': 'ùòà', 'B': 'ùòâ', 'C': 'ùòä', 'D': 'ùòã', 'E': 'ùòå', 'F': 'ùòç', 'G': 'ùòé', 'H': 'ùòè',\n    'I': 'ùòê', 'J': 'ùòë', 'K': 'ùòí', 'L': 'ùòì', 'M': 'ùòî', 'N': 'ùòï', 'O': 'ùòñ', 'P': 'ùòó',\n    'Q': 'ùòò', 'R': 'ùòô', 'S': 'ùòö', 'T': 'ùòõ', 'U': 'ùòú', 'V': 'ùòù', 'W': 'ùòû', 'X': 'ùòü',\n    'Y': 'ùò†', 'Z': 'ùò°',\n    \n    // Lettres minuscules a-z ‚Üí ùò¢-ùòª (U+1D622-U+1D63B)\n    'a': 'ùò¢', 'b': 'ùò£', 'c': 'ùò§', 'd': 'ùò•', 'e': 'ùò¶', 'f': 'ùòß', 'g': 'ùò®', 'h': 'ùò©',\n    'i': 'ùò™', 'j': 'ùò´', 'k': 'ùò¨', 'l': 'ùò≠', 'm': 'ùòÆ', 'n': 'ùòØ', 'o': 'ùò∞', 'p': 'ùò±',\n    'q': 'ùò≤', 'r': 'ùò≥', 's': 'ùò¥', 't': 'ùòµ', 'u': 'ùò∂', 'v': 'ùò∑', 'w': 'ùò∏', 'x': 'ùòπ',\n    'y': 'ùò∫', 'z': 'ùòª'\n    \n    // Note: Les chiffres n'ont pas d'√©quivalent italique dans Unicode Mathematical\n    // Ils restent en forme normale\n  };\n\n  try {\n    // Transformer chaque caract√®re\n    let result = '';\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      const italicChar = italicMappings[char];\n      result += italicChar || char; // Utiliser le caract√®re italique ou le caract√®re original\n    }\n\n    return result;\n  } catch (error) {\n    return text; // Fallback vers le texte original\n  }\n}\n\n/**\n * Ajoute combining underline aux caract√®res\n * Utilis√© pour le formatage soulign√© sur LinkedIn\n * @param {string} text - Le texte √† formater\n * @returns {string} - Le texte format√© avec soulignement Unicode\n */\nexport function toUnderline(text) {\n  if (!text || typeof text !== 'string') {\n    return text;\n  }\n\n  // Approche optimale : Mathematical Monospace + Combining Underline\n  // Comme dans ton exemple : ùöÑÃ≤ùöóÃ≤ùöçÃ≤ùöéÃ≤ùöõÃ≤ùöïÃ≤ùöíÃ≤ùöóÃ≤ùöéÃ≤\n  const monospaceMap = {\n    // Lettres majuscules A-Z ‚Üí Mathematical Monospace (U+1D670-U+1D689)\n    'A': 'ùô∞', 'B': 'ùô±', 'C': 'ùô≤', 'D': 'ùô≥', 'E': 'ùô¥', 'F': 'ùôµ', 'G': 'ùô∂', 'H': 'ùô∑',\n    'I': 'ùô∏', 'J': 'ùôπ', 'K': 'ùô∫', 'L': 'ùôª', 'M': 'ùôº', 'N': 'ùôΩ', 'O': 'ùôæ', 'P': 'ùôø',\n    'Q': 'ùöÄ', 'R': 'ùöÅ', 'S': 'ùöÇ', 'T': 'ùöÉ', 'U': 'ùöÑ', 'V': 'ùöÖ', 'W': 'ùöÜ', 'X': 'ùöá',\n    'Y': 'ùöà', 'Z': 'ùöâ',\n    \n    // Lettres minuscules a-z ‚Üí Mathematical Monospace (U+1D68A-U+1D6A3)\n    'a': 'ùöä', 'b': 'ùöã', 'c': 'ùöå', 'd': 'ùöç', 'e': 'ùöé', 'f': 'ùöè', 'g': 'ùöê', 'h': 'ùöë',\n    'i': 'ùöí', 'j': 'ùöì', 'k': 'ùöî', 'l': 'ùöï', 'm': 'ùöñ', 'n': 'ùöó', 'o': 'ùöò', 'p': 'ùöô',\n    'q': 'ùöö', 'r': 'ùöõ', 's': 'ùöú', 't': 'ùöù', 'u': 'ùöû', 'v': 'ùöü', 'w': 'ùö†', 'x': 'ùö°',\n    'y': 'ùö¢', 'z': 'ùö£',\n    \n    // Chiffres 0-9 ‚Üí Mathematical Monospace (U+1D7F6-U+1D7FF)\n    '0': 'ùü∂', '1': 'ùü∑', '2': 'ùü∏', '3': 'ùüπ', '4': 'ùü∫', '5': 'ùüª', '6': 'ùüº', '7': 'ùüΩ', '8': 'ùüæ', '9': 'ùüø'\n  };\n\n  // Combining underline Unicode (U+0332)\n  const COMBINING_UNDERLINE = '\\u0332';\n\n  try {\n    let result = '';\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      const monospaceChar = monospaceMap[char];\n      \n      if (monospaceChar) {\n        // Caract√®re monospace + combining underline\n        result += monospaceChar + COMBINING_UNDERLINE;\n      } else if (char === ' ') {\n        result += char; // Garder les espaces normaux\n      } else {\n        // Pour les caract√®res non mapp√©s, utiliser le caract√®re original + underline\n        result += char + COMBINING_UNDERLINE;\n      }\n    }\n\n    return result;\n  } catch (error) {\n    return text; // Fallback vers le texte original\n  }\n}\n\n/**\n * Ajoute combining strikethrough aux caract√®res\n * Utilis√© pour le formatage barr√© sur LinkedIn\n * @param {string} text - Le texte √† formater\n * @returns {string} - Le texte format√© avec strikethrough Unicode\n */\nexport function toStrikethrough(text) {\n  if (!text || typeof text !== 'string') {\n    return text;\n  }\n\n  // Combining strikethrough Unicode (U+0336)\n  const COMBINING_STRIKETHROUGH = '\\u0336';\n\n  try {\n    let result = '';\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      \n      // Ajouter le caract√®re\n      result += char;\n      \n      // Ajouter le combining strikethrough seulement pour les caract√®res visibles\n      // (pas pour les espaces, retours √† la ligne, etc.)\n      if (char.trim() !== '' && !char.match(/\\s/)) {\n        result += COMBINING_STRIKETHROUGH;\n      }\n    }\n\n    return result;\n  } catch (error) {\n    return text; // Fallback vers le texte original\n  }\n}\n\n/**\n * Convertit un texte format√© vers sa forme normale\n * @param {string} text - Le texte format√© √† normaliser\n * @returns {string} - Le texte en forme normale\n */\nexport function toNormal(text) {\n  if (!text || typeof text !== 'string') {\n    return text;\n  }\n\n  try {\n    let result = '';\n    \n    // Tables de reverse mapping pour chaque formatage\n    const reverseMapping = {\n      // Mathematical Bold ‚Üí Normal\n      'ùêÄ': 'A', 'ùêÅ': 'B', 'ùêÇ': 'C', 'ùêÉ': 'D', 'ùêÑ': 'E', 'ùêÖ': 'F', 'ùêÜ': 'G', 'ùêá': 'H',\n      'ùêà': 'I', 'ùêâ': 'J', 'ùêä': 'K', 'ùêã': 'L', 'ùêå': 'M', 'ùêç': 'N', 'ùêé': 'O', 'ùêè': 'P',\n      'ùêê': 'Q', 'ùêë': 'R', 'ùêí': 'S', 'ùêì': 'T', 'ùêî': 'U', 'ùêï': 'V', 'ùêñ': 'W', 'ùêó': 'X',\n      'ùêò': 'Y', 'ùêô': 'Z',\n      'ùêö': 'a', 'ùêõ': 'b', 'ùêú': 'c', 'ùêù': 'd', 'ùêû': 'e', 'ùêü': 'f', 'ùê†': 'g', 'ùê°': 'h',\n      'ùê¢': 'i', 'ùê£': 'j', 'ùê§': 'k', 'ùê•': 'l', 'ùê¶': 'm', 'ùêß': 'n', 'ùê®': 'o', 'ùê©': 'p',\n      'ùê™': 'q', 'ùê´': 'r', 'ùê¨': 's', 'ùê≠': 't', 'ùêÆ': 'u', 'ùêØ': 'v', 'ùê∞': 'w', 'ùê±': 'x',\n      'ùê≤': 'y', 'ùê≥': 'z',\n      'ùüé': '0', 'ùüè': '1', 'ùüê': '2', 'ùüë': '3', 'ùüí': '4', 'ùüì': '5', 'ùüî': '6', 'ùüï': '7', 'ùüñ': '8', 'ùüó': '9',\n      \n      // Mathematical Sans-Serif Italic ‚Üí Normal\n      'ùòà': 'A', 'ùòâ': 'B', 'ùòä': 'C', 'ùòã': 'D', 'ùòå': 'E', 'ùòç': 'F', 'ùòé': 'G', 'ùòè': 'H',\n      'ùòê': 'I', 'ùòë': 'J', 'ùòí': 'K', 'ùòì': 'L', 'ùòî': 'M', 'ùòï': 'N', 'ùòñ': 'O', 'ùòó': 'P',\n      'ùòò': 'Q', 'ùòô': 'R', 'ùòö': 'S', 'ùòõ': 'T', 'ùòú': 'U', 'ùòù': 'V', 'ùòû': 'W', 'ùòü': 'X',\n      'ùò†': 'Y', 'ùò°': 'Z',\n      'ùò¢': 'a', 'ùò£': 'b', 'ùò§': 'c', 'ùò•': 'd', 'ùò¶': 'e', 'ùòß': 'f', 'ùò®': 'g', 'ùò©': 'h',\n      'ùò™': 'i', 'ùò´': 'j', 'ùò¨': 'k', 'ùò≠': 'l', 'ùòÆ': 'm', 'ùòØ': 'n', 'ùò∞': 'o', 'ùò±': 'p',\n      'ùò≤': 'q', 'ùò≥': 'r', 'ùò¥': 's', 'ùòµ': 't', 'ùò∂': 'u', 'ùò∑': 'v', 'ùò∏': 'w', 'ùòπ': 'x',\n      'ùò∫': 'y', 'ùòª': 'z',\n      \n      // Mathematical Monospace ‚Üí Normal\n      'ùô∞': 'A', 'ùô±': 'B', 'ùô≤': 'C', 'ùô≥': 'D', 'ùô¥': 'E', 'ùôµ': 'F', 'ùô∂': 'G', 'ùô∑': 'H',\n      'ùô∏': 'I', 'ùôπ': 'J', 'ùô∫': 'K', 'ùôª': 'L', 'ùôº': 'M', 'ùôΩ': 'N', 'ùôæ': 'O', 'ùôø': 'P',\n      'ùöÄ': 'Q', 'ùöÅ': 'R', 'ùöÇ': 'S', 'ùöÉ': 'T', 'ùöÑ': 'U', 'ùöÖ': 'V', 'ùöÜ': 'W', 'ùöá': 'X',\n      'ùöà': 'Y', 'ùöâ': 'Z',\n      'ùöä': 'a', 'ùöã': 'b', 'ùöå': 'c', 'ùöç': 'd', 'ùöé': 'e', 'ùöè': 'f', 'ùöê': 'g', 'ùöë': 'h',\n      'ùöí': 'i', 'ùöì': 'j', 'ùöî': 'k', 'ùöï': 'l', 'ùöñ': 'm', 'ùöó': 'n', 'ùöò': 'o', 'ùöô': 'p',\n      'ùöö': 'q', 'ùöõ': 'r', 'ùöú': 's', 'ùöù': 't', 'ùöû': 'u', 'ùöü': 'v', 'ùö†': 'w', 'ùö°': 'x',\n      'ùö¢': 'y', 'ùö£': 'z',\n      'ùü∂': '0', 'ùü∑': '1', 'ùü∏': '2', 'ùüπ': '3', 'ùü∫': '4', 'ùüª': '5', 'ùüº': '6', 'ùüΩ': '7', 'ùüæ': '8', 'ùüø': '9'\n    };\n\n    // Combining characters √† supprimer\n    const COMBINING_UNDERLINE = '\\u0332';\n    const COMBINING_STRIKETHROUGH = '\\u0336';\n\n    // Parcourir chaque caract√®re Unicode r√©el (pas code unit)\n    for (const char of text) {\n      // Ignorer les combining characters\n      if (char === COMBINING_UNDERLINE || char === COMBINING_STRIKETHROUGH) {\n        continue;\n      }\n      \n      // Convertir vers la forme normale si mapping existe\n      const normalChar = reverseMapping[char];\n      result += normalChar || char;\n    }\n\n    return result;\n\n  } catch (error) {\n    return text;\n  }\n}\n\n/**\n * D√©tecte le type de formatage appliqu√© √† un texte\n * @param {string} text - Le texte √† analyser\n * @returns {Array<string>} - Liste des formatages d√©tect√©s\n */\nexport function detectFormatting(text) {\n  if (!text || typeof text !== 'string') {\n    return [];\n  }\n\n  const detectedFormats = [];\n\n  try {\n    // Constantes pour les combining characters\n    const COMBINING_UNDERLINE = '\\u0332';\n    const COMBINING_STRIKETHROUGH = '\\u0336';\n\n    // Regex pour d√©tecter les ranges Unicode des diff√©rents formatages\n    const unicodeRanges = {\n      // Mathematical Bold : ùêÄ-ùêô (U+1D400-U+1D419) + ùêö-ùê≥ (U+1D41A-U+1D433) + ùüé-ùüó (U+1D7CE-U+1D7D7)\n      bold: /[\\u{1D400}-\\u{1D419}\\u{1D41A}-\\u{1D433}\\u{1D7CE}-\\u{1D7D7}]/u,\n      \n      // Mathematical Sans-Serif Italic : ùòà-ùò° (U+1D608-U+1D621) + ùò¢-ùòª (U+1D622-U+1D63B)\n      italic: /[\\u{1D608}-\\u{1D621}\\u{1D622}-\\u{1D63B}]/u,\n      \n      // Mathematical Monospace : ùô∞-ùöâ (U+1D670-U+1D689) + ùöä-ùö£ (U+1D68A-U+1D6A3) + ùü∂-ùüø (U+1D7F6-U+1D7FF)\n      monospace: /[\\u{1D670}-\\u{1D689}\\u{1D68A}-\\u{1D6A3}\\u{1D7F6}-\\u{1D7FF}]/u\n    };\n\n    // D√©tection du gras (Mathematical Bold)\n    if (unicodeRanges.bold.test(text)) {\n      detectedFormats.push('bold');\n    }\n\n    // D√©tection de l'italique (Mathematical Sans-Serif Italic)\n    if (unicodeRanges.italic.test(text)) {\n      detectedFormats.push('italic');\n    }\n\n    // D√©tection du soulignement (monospace + combining underline)\n    // toUnderline() utilise monospace + combining underline, donc on d√©tecte les deux\n    if (text.includes(COMBINING_UNDERLINE) || unicodeRanges.monospace.test(text)) {\n      detectedFormats.push('underline');\n    }\n\n    // D√©tection du barr√© (combining strikethrough)\n    if (text.includes(COMBINING_STRIKETHROUGH)) {\n      detectedFormats.push('strikethrough');\n    }\n\n    return detectedFormats;\n\n  } catch (error) {\n    return [];\n  }\n}\n\n/**\n * Applique un formatage simple avec toggle off et remplacement\n * @param {string} text - Le texte √† formater\n * @param {Array<string>} existingFormats - Liste des formatages d√©j√† appliqu√©s\n * @param {string} newFormat - Le nouveau formatage √† appliquer\n * @returns {string} - Le texte avec le nouveau formatage appliqu√©\n */\nexport function applyIncrementalFormatting(text, existingFormats, newFormat) {\n  if (!text || typeof text !== 'string') {\n    return text;\n  }\n\n  if (!existingFormats || !Array.isArray(existingFormats)) {\n    existingFormats = [];\n  }\n\n  if (!newFormat || typeof newFormat !== 'string') {\n    return text;\n  }\n\n  try {\n    // 1. TOGGLE OFF: Si le formatage est d√©j√† appliqu√©, revenir au texte normal\n    if (existingFormats.includes(newFormat)) {\n      return toNormal(text);\n    }\n\n    // 2. REMPLACEMENT: Si un autre formatage existe, le remplacer (pas de combinaison)\n    if (existingFormats.length > 0) {\n      const normalizedText = toNormal(text);\n      return applySimpleFormatting(normalizedText, newFormat);\n    }\n\n    // 3. FORMATAGE SIMPLE: Aucun formatage existant, appliquer le nouveau\n    return applySimpleFormatting(text, newFormat);\n\n  } catch (error) {\n    return text;\n  }\n}\n\n/**\n * Applique un formatage simple √† un texte normal\n * @param {string} text - Le texte √† formater\n * @param {string} formatType - Le type de formatage ('bold', 'italic', 'underline', 'strikethrough')\n * @returns {string} - Le texte format√©\n */\nfunction applySimpleFormatting(text, formatType) {\n  switch (formatType) {\n    case 'bold':\n      return toBold(text);\n    case 'italic':\n      return toItalic(text);\n    case 'underline':\n      return toUnderline(text);\n    case 'strikethrough':\n      return toStrikethrough(text);\n    default:\n      return text;\n  }\n}\n\n\n\n// Export de toutes les fonctions pour utilisation dans content.js\nexport const formatters = {\n  toBold,\n  toItalic,\n  toUnderline,\n  toStrikethrough,\n  toNormal,\n  detectFormatting,\n  applyIncrementalFormatting\n};","// LinkedIn Formateur Toolbox - Content Script\n// Ce script sera inject√© sur toutes les pages LinkedIn\n\nimport { selectionDetector } from './selection-detector.js';\nimport { toolboxUI } from './toolbox.js';\nimport { toBold, toItalic, toUnderline, toStrikethrough, toNormal, detectFormatting, applyIncrementalFormatting } from './unicode-formatters.js';\n\n\n/**\n * Classe principale de l'extension\n */\nclass LinkedInFormatterToolbox {\n  constructor() {\n    this.isInitialized = false;\n    this.currentSelection = null;\n    \n    // Bind methods\n    this.handleSelectionEvent = this.handleSelectionEvent.bind(this);\n  }\n\n  /**\n   * Initialise l'extension\n   */\n  async init() {\n    if (this.isInitialized) {\n      return;\n    }\n\n    try {\n      // V√©rifier qu'on est bien sur LinkedIn\n      if (!this.isLinkedInPage()) {\n        return;\n      }\n\n      // Initialiser le d√©tecteur de s√©lection\n      selectionDetector.init();\n      \n      // Ajouter notre handler pour les √©v√©nements de s√©lection\n      selectionDetector.addSelectionHandler(this.handleSelectionEvent);\n\n      // Enregistrer les handlers de formatage\n      this.registerFormatHandlers();\n\n      this.isInitialized = true;\n\n    } catch (error) {\n      // Silently fail in production\n    }\n  }\n\n  /**\n   * V√©rifie si on est sur une page LinkedIn\n   */\n  isLinkedInPage() {\n    return window.location.hostname.includes('linkedin.com');\n  }\n\n  /**\n   * G√®re les √©v√©nements de s√©lection/d√©s√©lection\n   */\n  handleSelectionEvent(type, data) {\n    if (type === 'selection') {\n      this.onTextSelected(data);\n    } else if (type === 'deselection') {\n      this.onTextDeselected(data);\n    }\n  }\n\n  /**\n   * Appel√© quand du texte est s√©lectionn√©\n   */\n  onTextSelected(selectionData) {\n    this.currentSelection = selectionData;\n    \n    // LIN-33: D√©tecter les formatages existants\n    const existingFormats = detectFormatting(selectionData.text);\n\n    // Enrichir les donn√©es de s√©lection avec les formatages d√©tect√©s\n    selectionData.existingFormats = existingFormats;\n\n    // Afficher la toolbox\n    this.showToolbox(selectionData);\n  }\n\n  /**\n   * Appel√© quand la s√©lection est effac√©e\n   */\n  onTextDeselected(data) {\n    this.currentSelection = null;\n\n    // Masquer la toolbox\n    this.hideToolbox();\n  }\n\n  /**\n   * Affiche la toolbox de formatage\n   */\n  showToolbox(selectionData) {\n    toolboxUI.show(selectionData);\n  }\n\n  /**\n   * Masque la toolbox de formatage\n   */\n  hideToolbox() {\n    toolboxUI.hide();\n  }\n\n\n  /**\n   * Enregistre les handlers de formatage\n   */\n  registerFormatHandlers() {\n    // Handler pour le formatage gras\n    toolboxUI.addFormatHandler('bold', (selectionData, formatType) => {\n      this.applyFormatting(selectionData, formatType);\n    });\n\n    // Handler pour le formatage italique\n    toolboxUI.addFormatHandler('italic', (selectionData, formatType) => {\n      this.applyFormatting(selectionData, formatType);\n    });\n\n    // Handler pour le formatage soulign√©\n    toolboxUI.addFormatHandler('underline', (selectionData, formatType) => {\n      this.applyFormatting(selectionData, formatType);\n    });\n\n    // Handler pour le formatage barr√©\n    toolboxUI.addFormatHandler('strikethrough', (selectionData, formatType) => {\n      this.applyFormatting(selectionData, formatType);\n    });\n  }\n\n  /**\n   * Applique le formatage au texte s√©lectionn√© avec comportement simplifi√©\n   */\n  applyFormatting(selectionData, formatType) {\n    try {\n      const existingFormats = selectionData.existingFormats || [];\n      \n      // Utiliser la logique simplifi√©e pour tous les cas\n      const formattedText = applyIncrementalFormatting(\n        selectionData.text, \n        existingFormats, \n        formatType\n      );\n\n      // Remplacer le texte s√©lectionn√©\n      this.replaceSelectedText(selectionData, formattedText);\n\n    } catch (error) {\n      // Silently fail in production\n    }\n  }\n\n  /**\n   * Remplace le texte s√©lectionn√© dans le champ LinkedIn\n   */\n  replaceSelectedText(selectionData, newText) {\n    try {\n      const field = selectionData.field;\n      const range = selectionData.range;\n\n      // M√©thode 1: Pour les √©l√©ments contenteditable (posts, commentaires)\n      if (field.contentEditable === 'true') {\n        // Supprimer le contenu s√©lectionn√© et ins√©rer le nouveau texte\n        range.deleteContents();\n        const textNode = document.createTextNode(newText);\n        range.insertNode(textNode);\n        \n        // Repositionner le curseur apr√®s le texte ins√©r√©\n        range.setStartAfter(textNode);\n        range.setEndAfter(textNode);\n        \n        // Effacer la s√©lection\n        window.getSelection().removeAllRanges();\n        window.getSelection().addRange(range);\n        window.getSelection().collapseToEnd();\n\n        // D√©clencher les √©v√©nements pour notifier LinkedIn\n        this.triggerLinkedInEvents(field);\n\n      // M√©thode 2: Pour les textarea et input\n      } else if (field.tagName === 'TEXTAREA' || field.tagName === 'INPUT') {\n        const start = field.selectionStart;\n        const end = field.selectionEnd;\n        const value = field.value;\n        \n        // Remplacer le texte s√©lectionn√©\n        field.value = value.substring(0, start) + newText + value.substring(end);\n        \n        // Repositionner le curseur\n        const newCursorPos = start + newText.length;\n        field.setSelectionRange(newCursorPos, newCursorPos);\n        \n        // D√©clencher les √©v√©nements\n        this.triggerLinkedInEvents(field);\n\n      }\n\n    } catch (error) {\n      // Silently fail in production\n    }\n  }\n\n  /**\n   * D√©clenche les √©v√©nements n√©cessaires pour notifier LinkedIn des changements\n   */\n  triggerLinkedInEvents(field) {\n    // √âv√©nements de base pour notifier les changements\n    const events = ['input', 'change', 'keyup'];\n    \n    events.forEach(eventType => {\n      const event = new Event(eventType, {\n        bubbles: true,\n        cancelable: true\n      });\n      field.dispatchEvent(event);\n    });\n\n    // Focus sur le champ pour maintenir l'√©tat actif\n    field.focus();\n  }\n\n  /**\n   * Obtient la s√©lection actuelle\n   */\n  getCurrentSelection() {\n    return this.currentSelection;\n  }\n\n  /**\n   * Nettoie l'extension\n   */\n  destroy() {\n    if (!this.isInitialized) return;\n\n    // Nettoyer le d√©tecteur de s√©lection\n    selectionDetector.removeSelectionHandler(this.handleSelectionEvent);\n    selectionDetector.destroy();\n\n    // Nettoyer la toolbox\n    toolboxUI.destroy();\n\n    this.currentSelection = null;\n    this.isInitialized = false;\n  }\n}\n\n// Initialisation automatique\nconst toolbox = new LinkedInFormatterToolbox();\n\n// Exposer globalement pour l'extension\nwindow.linkedInFormatterToolbox = toolbox;\n\n// Initialiser quand le DOM est pr√™t\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', () => toolbox.init());\n} else {\n  // DOM d√©j√† pr√™t\n  toolbox.init();\n}\n\n// Pour LinkedIn SPA, r√©initialiser lors des changements de page\nlet currentUrl = window.location.href;\nconst observer = new MutationObserver(() => {\n  if (window.location.href !== currentUrl) {\n    currentUrl = window.location.href;\n    \n    // D√©lai pour laisser LinkedIn finir de charger\n    setTimeout(() => {\n      toolbox.destroy();\n      toolbox.init();\n    }, 1000);\n  }\n});\n\nobserver.observe(document.body, {\n  childList: true,\n  subtree: true\n});\n\n// Export pour les tests\nexport { LinkedInFormatterToolbox, toolbox };"],"names":[],"mappings":"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AE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AAC1F,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AAC1F,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AAC1F,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AACxB;AACA;AACA,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AAC1F,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AAC1F,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AAC1F,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AACxB;AACA;AACA,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AACzD,IAAI,GAA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,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AAC1F,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AAC1F,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AAC1F,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AACxB;AACA;AACA,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AAC1F,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AAC1F,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AAC1F,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI;AACxB;AACA;AACA,IAAI,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,I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AE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC5F,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC5F,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC1B,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAClH;AACA;AACA,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC5F,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC5F,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC5F,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC1B,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC5F,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC5F,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC5F,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC1B;AACA;AACA,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC5F,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC5F,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC5F,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC1B,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;AAC5F,MAAM,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,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"}